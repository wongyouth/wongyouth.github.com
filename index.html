
<!DOCTYPE HTML>
<html>
<head>
	<meta charset="utf-8">
	<title>鱼哥的技术博客</title>
	<meta name="author" content="Wongyouth / 自由鱼">

	
	<meta name="description" content="2013-07-03 git Comments Git Revisions 这篇博文记录Git使用中比较中级的技巧，不太容易记住。 先来看一段代码： # Dummy repository
$ git log --oneline
77bc990 Third commit
25d4fc4 &hellip;">
	

  <!-- http://t.co/dKP3o1e -->
  <meta name="HandheldFriendly" content="True">
  <meta name="MobileOptimized" content="320">
  <meta name="viewport" content="width=device-width, initial-scale=1">

	<link href="/atom.xml" rel="alternate" title="鱼哥的技术博客" type="application/atom+xml">
	
	<link rel="canonical" href="http://wongyouth.com/">
	<link href="/favicon.png" rel="shortcut icon">
	<link href="/stylesheets/screen.css" media="screen, projection" rel="stylesheet" type="text/css">
	<!--[if lt IE 9]><script src="//html5shiv.googlecode.com/svn/trunk/html5.js"></script><![endif]-->
	<script src="//ajax.googleapis.com/ajax/libs/jquery/1.7.2/jquery.min.js"></script>
	<link href='http://fonts.googleapis.com/css?family=Open+Sans:400italic,400,700' rel='stylesheet' type='text/css'>
	<!--Fonts from Google"s Web font directory at http://google.com/webfonts -->
<link href="http://fonts.googleapis.com/css?family=PT+Serif:regular,italic,bold,bolditalic" rel="stylesheet" type="text/css">
<link href="http://fonts.googleapis.com/css?family=PT+Sans:regular,italic,bold,bolditalic" rel="stylesheet" type="text/css">
<script src="/javascripts/jiathis.js" type="text/javascript"></script>
<meta property="wb:webmaster" content="7f133defa7956d35" />
<meta property="qc:admins" content="544531077671754067140526375" />

</head>


<body>
	<div class="container">
		<div class="left-col">
			<div class="intrude-less">
			<header id="header" class="inner"><div class="profilepic">	
	<script src="/javascripts/md5.js"></script>
	<script type="text/javascript">
		$(function(){
			$('.profilepic').append("<img src='http://www.gravatar.com/avatar/" + MD5("wongyouth@gmail.com") + "?s=160' alt='Profile Picture' style='width: 160px;' />");
		});
	</script>
</div>
<hgroup>
  <h1><a href="/">鱼哥的技术博客</a></h1>
</hgroup>

<p class="subtitle">Do things the hard way.</p>

<p class="bro">Hi buddy, my name is Wang Yongzhi, living in Shanghai China. I am a Rails programmer, and have a passion for Infomation Technology and web trends.</p>

<nav id="main-nav"><ul class="main-navigation">
  <li><a href="/">Blog</a></li>
  <li><a href="/blog/archives">Archives</a></li>
</ul>
</nav>
<nav id="sub-nav">
	<div class="social">
		
		
		
		<a class="twitter" href="http://twitter.com/wongyouth" title="Twitter">Twitter</a>
		
		
		<a class="github" href="https://github.com/wongyouth" title="GitHub">GitHub</a>
		
		
		
		
		
		
		
		<a class="rss" href="/atom.xml" title="RSS">RSS</a>
		
	</div>
</nav>
</header>				
			</div>
		</div>	
		<div class="mid-col">
			
				
			
			<div class="mid-col-container">
				<div id="content" class="inner">
<div itemscope itemtype="http://schema.org/Blog">


    <article class="post" itemprop="blogPost" itemscope itemtype="http://schema.org/BlogPosting">
	<div class="meta">
		<div class="date">








  


<time datetime="2013-07-03T16:01:00+08:00" data-updated="true" itemprop="datePublished">2013-07-03</time></div>
		<div class="tags">


	<a class='category' href='/blog/categories/git/'>git</a>


</div>
		
			<span class="comments"><a href="/blog/2013/07/03/git-revisions/#disqus_thread">Comments</a></span>
		
	</div>
	<h1 class="title" itemprop="name"><a href="/blog/2013/07/03/git-revisions/" itemprop="url">Git Revisions</a></h1>
	<div class="entry-content" itemprop="articleBody">
		<p>这篇博文记录Git使用中比较中级的技巧，不太容易记住。</p>

<p>先来看一段代码：</p>

<pre><code># Dummy repository
$ git log --oneline
77bc990 Third commit
25d4fc4 Second commit
f0faab6 First commit
$ git log --oneline HEAD^
25d4fc4 Second commit
f0faab6 First commit
$ git log --oneline HEAD^
25d4fc4 Second commit
f0faab6 First commit
$ git log --oneline HEAD^^
f0faab6 First commit
$ git log --oneline HEAD^2
fatal: ambiguous argument 'HEAD^2': unknown revision or path not in the working tree.
</code></pre>

<p>从这里可以看出来<code>^</code> 与 <code>~</code> 是有区别的</p>

<p><code>HEAD^2</code> 与 <code>HEAD~2</code> 的区别</p>

<p><code>HEAD^2</code> 表示的是当前HEAD的第二个父节点
<code>HEAD~2</code> 表示的是当前HEAD的第一个父节点的第一个父节点</p>

<p>记住<code>~</code>永远在第一个父节点上回溯。</p>

<p>那么如果要表示第二代父节点的第10代祖先的第2个父节点如何表示呢</p>

<pre><code>HEAD^2~10^2
</code></pre>

<p>再来看第二段代码:</p>

<pre><code>$ git checkout -b other f0faab6
Switched to a new branch 'other'
$ touch file
$ git add file
$ git commit -m "Adding file" file
$ git log --oneline
1762164 Adding file
f0faab6 First commit
$ git log --oneline other..master
77bc990 Third commit
25d4fc4 Second commit
$ git log --oneline master..other
1762164 Adding file
</code></pre>

<p>可以看出 <code>..</code> 前后分支对换，结果是不一样的
这段代码的意思是找出在一个分支上有，但是在另一个分支上没有的递交。
其原理是先回溯到两者的共同祖先，然后用这个祖先比较分支，这样就得出来只属于那个分支的递交履历。</p>

<p>再看第三段代码：</p>

<pre><code>$ git log master...other
1762164 Adding file
77bc990 Third commit
25d4fc4 Second commit
$ git log other...master
1762164 Adding file
77bc990 Third commit
25d4fc4 Second commit
</code></pre>

<p>比较之前的代码，可以看出来结果与前后关系相同，两者的履历都会显示</p>

		
		
	</div>

</article>


    <article class="post" itemprop="blogPost" itemscope itemtype="http://schema.org/BlogPosting">
	<div class="meta">
		<div class="date">








  


<time datetime="2013-06-01T22:30:00+08:00" data-updated="true" itemprop="datePublished">2013-06-01</time></div>
		<div class="tags">


	<a class='category' href='/blog/categories/rails/'>rails</a>, <a class='category' href='/blog/categories/ruby/'>ruby</a>


</div>
		
			<span class="comments"><a href="/blog/2013/06/01/speed-spider-for-web-crawling/#disqus_thread">Comments</a></span>
		
	</div>
	<h1 class="title" itemprop="name"><a href="/blog/2013/06/01/speed-spider-for-web-crawling/" itemprop="url">Speed Spider for Web Crawling</a></h1>
	<div class="entry-content" itemprop="articleBody">
		<h2>background</h2>

<p>Some days ago I wanted to learn some css stuff from a site, I changed some css style to see what it turns to.
After 10 minutes after I got tired when I have to change the source again and again in the browser.
So I googled to find what kind of tools can be used to download files from a site, but I can&#8217;t find anything satisfied.
So after searched github I found I can do it myself with little work.</p>

<p>Here comes the <a href="https://github.com/wongyouth/speed_spider">SpeedSpider</a>, it&#8217;s A simple and speedy web spider for site pages downloading.</p>

<p>UPDATE:</p>

<p>It turns out <code>wget</code> can do all the jobs I wanted except it doest not use threads. So wget way may be slower than SpeedSpider.
You can download bootstrap page with code below.</p>

<pre><code>wget -m -p -E -k -np http://twitter.github.io/bootstrap
</code></pre>


		
		<a href="/blog/2013/06/01/speed-spider-for-web-crawling/" class="more-link">Read more</a>
	</div>

</article>


    <article class="post" itemprop="blogPost" itemscope itemtype="http://schema.org/BlogPosting">
	<div class="meta">
		<div class="date">








  


<time datetime="2013-04-23T14:33:00+08:00" data-updated="true" itemprop="datePublished">2013-04-23</time></div>
		<div class="tags">


	<a class='category' href='/blog/categories/server/'>server</a>


</div>
		
			<span class="comments"><a href="/blog/2013/04/23/use-nfs-to-share-files/#disqus_thread">Comments</a></span>
		
	</div>
	<h1 class="title" itemprop="name"><a href="/blog/2013/04/23/use-nfs-to-share-files/" itemprop="url">Use Nfs to Share Files</a></h1>
	<div class="entry-content" itemprop="articleBody">
		<p>当一个服务器不能负载的时候，就需要增加一个服务器来做负载均衡，这个时候就需要做文件共享。
这一次我们来看看如何在ubuntu12.04上用nfs来做文件共享</p>


		
		<a href="/blog/2013/04/23/use-nfs-to-share-files/" class="more-link">Read more</a>
	</div>

</article>


    <article class="post" itemprop="blogPost" itemscope itemtype="http://schema.org/BlogPosting">
	<div class="meta">
		<div class="date">








  


<time datetime="2013-04-22T19:28:00+08:00" data-updated="true" itemprop="datePublished">2013-04-22</time></div>
		<div class="tags">


	<a class='category' href='/blog/categories/server/'>server</a>


</div>
		
			<span class="comments"><a href="/blog/2013/04/22/config-dns-server-for-development/#disqus_thread">Comments</a></span>
		
	</div>
	<h1 class="title" itemprop="name"><a href="/blog/2013/04/22/config-dns-server-for-development/" itemprop="url">Config Dns Server for Development</a></h1>
	<div class="entry-content" itemprop="articleBody">
		<p>开发的时候我们很多时候需要配置一个与线上相同的环境来做测试。
其中一项就是我们需要用线上相同的域名在做测试，这样就需要在开发环境里面配置域名映射。
最为简单的情况就是使用/etc/hosts，但是如果是有一团队来做测试，需要所有的人有相同的配置，
特别是有新成员来的时候，相同的工作要不厌其烦的重复做重复说明。</p>

<p>还有一种办法就是找一台机器来做域名解析服务，其实配置起来也不是很麻烦，下面就让我来讲一个简单的例子。</p>


		
		<a href="/blog/2013/04/22/config-dns-server-for-development/" class="more-link">Read more</a>
	</div>

</article>


    <article class="post" itemprop="blogPost" itemscope itemtype="http://schema.org/BlogPosting">
	<div class="meta">
		<div class="date">








  


<time datetime="2013-01-30T11:22:00+08:00" data-updated="true" itemprop="datePublished">2013-01-30</time></div>
		<div class="tags">


	<a class='category' href='/blog/categories/server/'>server</a>


</div>
		
			<span class="comments"><a href="/blog/2013/01/30/use-lvm-with-your-server/#disqus_thread">Comments</a></span>
		
	</div>
	<h1 class="title" itemprop="name"><a href="/blog/2013/01/30/use-lvm-with-your-server/" itemprop="url">Use Lvm With Your Server</a></h1>
	<div class="entry-content" itemprop="articleBody">
		<p>based on:
  * a disk /dev/xvdd more than 50G
  * ubuntu 12.04 LTS</p>

<pre><code># install lvm2
sudo apt-get install lvm2

# create a pysical volume
sudo pvcreate /dev/xvdd

# create a volume group with name `yun`
sudo vgcreate yun /dev/xvdd

# create a logical volume named `gp` from vg yun with 50 giga bytes
sudo lvcreate -L 50G -n pg yun
# use max size of vg to create a lv
sudo lvcreate -l 100%FREE -n pg yun #

# format the logical volume
sudo mkfs.ext4 /dev/mapper/yun-pg

# mount the lv
sudo mount /dev/mapper/yun-pg /mnt

# add new device
sudo pvcreate /dev/xvde

# extend vg
sudo vgextend yun /dev/mapper/yun-pg

# extend lv to 8G
sudo lvextend -L8G yun-pg

# extend lv with extra 8G
sudo lvextend -L+8G /dev/mapper/yun-pg
</code></pre>

<p>how-to: <a href="http://www.howtogeek.com/howto/40702/how-to-manage-and-use-lvm-logical-volume-management-in-ubuntu/">http://www.howtogeek.com/howto/40702/how-to-manage-and-use-lvm-logical-volume-management-in-ubuntu/</a><br/>
recipies: <a href="http://docstore.mik.ua/manuals/hp-ux/en/5992-4589/ch03s03.html">http://docstore.mik.ua/manuals/hp-ux/en/5992-4589/ch03s03.html</a><br/>
pvreduce: <a href="http://www.cclove.me/Create_Extend_and_Reduce_LVM_on_Ubuntu1204.html">http://www.cclove.me/Create_Extend_and_Reduce_LVM_on_Ubuntu1204.html</a><br/></p>

		
		
	</div>

</article>


    <article class="post" itemprop="blogPost" itemscope itemtype="http://schema.org/BlogPosting">
	<div class="meta">
		<div class="date">








  


<time datetime="2013-01-05T20:46:00+08:00" data-updated="true" itemprop="datePublished">2013-01-05</time></div>
		<div class="tags">


	<a class='category' href='/blog/categories/server/'>server</a>


</div>
		
			<span class="comments"><a href="/blog/2013/01/05/make-your-site-ssl-enabled/#disqus_thread">Comments</a></span>
		
	</div>
	<h1 class="title" itemprop="name"><a href="/blog/2013/01/05/make-your-site-ssl-enabled/" itemprop="url">让你的网站支持SSL</a></h1>
	<div class="entry-content" itemprop="articleBody">
		<p>ssl是什么，ssl就是你在网址里面看到的https。区别于http，如果是ssl的，那么他所传输的数据是保密的，
别人无法根据监听网络偷取你的信用卡数据，登录密码。现在国内的银行等大型网站基本上都支持ssl了。</p>

<p>我们在用apache作为web服务器来配置一个网站的时候，往往自动忽略掉配置ssl，原因是ssl的CA一把都是收费的。
而且费用也都不低。现在终于好了，startssl.com支持免费的单域名了。</p>


		
		<a href="/blog/2013/01/05/make-your-site-ssl-enabled/" class="more-link">Read more</a>
	</div>

</article>


    <article class="post" itemprop="blogPost" itemscope itemtype="http://schema.org/BlogPosting">
	<div class="meta">
		<div class="date">








  


<time datetime="2012-11-05T14:11:00+08:00" data-updated="true" itemprop="datePublished">2012-11-05</time></div>
		<div class="tags">


	<a class='category' href='/blog/categories/git/'>git</a>, <a class='category' href='/blog/categories/server/'>server</a>


</div>
		
			<span class="comments"><a href="/blog/2012/11/05/make-a-git-repo-mirror-for-redmine/#disqus_thread">Comments</a></span>
		
	</div>
	<h1 class="title" itemprop="name"><a href="/blog/2012/11/05/make-a-git-repo-mirror-for-redmine/" itemprop="url">redmine用Git Repo镜像脚本</a></h1>
	<div class="entry-content" itemprop="articleBody">
		<p>一般我用<a href="http://git-scm.com">git</a>来管理代码，后台用<a href="https://github.com/sitaramc/gitolite">gitolite</a>，<a href="http://redmine.org">redmine</a>来管理项目，redmine中可以结合git来参看git提交信息时，非常有用。</p>


		
		<a href="/blog/2012/11/05/make-a-git-repo-mirror-for-redmine/" class="more-link">Read more</a>
	</div>

</article>


    <article class="post" itemprop="blogPost" itemscope itemtype="http://schema.org/BlogPosting">
	<div class="meta">
		<div class="date">








  


<time datetime="2012-10-25T09:34:00+08:00" data-updated="true" itemprop="datePublished">2012-10-25</time></div>
		<div class="tags">


	<a class='category' href='/blog/categories/git/'>git</a>


</div>
		
			<span class="comments"><a href="/blog/2012/10/25/return-to-old-revision-on-git-repo/#disqus_thread">Comments</a></span>
		
	</div>
	<h1 class="title" itemprop="name"><a href="/blog/2012/10/25/return-to-old-revision-on-git-repo/" itemprop="url">Git中如何退回到旧版本</a></h1>
	<div class="entry-content" itemprop="articleBody">
		<p>使用Git用来管理版本时，有时候会有不小心递交了错误的代码，想回退到旧的版本中的场景。让我们看看在Git中应该如何正确操作。</p>


		
		<a href="/blog/2012/10/25/return-to-old-revision-on-git-repo/" class="more-link">Read more</a>
	</div>

</article>


    <article class="post" itemprop="blogPost" itemscope itemtype="http://schema.org/BlogPosting">
	<div class="meta">
		<div class="date">








  


<time datetime="2012-07-05T09:41:00+08:00" data-updated="true" itemprop="datePublished">2012-07-05</time></div>
		<div class="tags">


	<a class='category' href='/blog/categories/rails/'>rails</a>


</div>
		
			<span class="comments"><a href="/blog/2012/07/05/rails-development-oriented-vimfiles/#disqus_thread">Comments</a></span>
		
	</div>
	<h1 class="title" itemprop="name"><a href="/blog/2012/07/05/rails-development-oriented-vimfiles/" itemprop="url">Rails开发用 Vimfiles 配置</a></h1>
	<div class="entry-content" itemprop="articleBody">
		<p>看到很多朋友在烦编辑器的事，就像自己刚开始的时候一样。 我还是选择了vim, 就是喜欢他可以配置到自己喜欢的样子， 不知道你喜欢不喜欢我的配置，但是如果你着急上手，试试我的。</p>


		
		<a href="/blog/2012/07/05/rails-development-oriented-vimfiles/" class="more-link">Read more</a>
	</div>

</article>


    <article class="post" itemprop="blogPost" itemscope itemtype="http://schema.org/BlogPosting">
	<div class="meta">
		<div class="date">








  


<time datetime="2012-06-30T12:54:00+08:00" data-updated="true" itemprop="datePublished">2012-06-30</time></div>
		<div class="tags">


	<a class='category' href='/blog/categories/database/'>database</a>, <a class='category' href='/blog/categories/rails/'>rails</a>


</div>
		
			<span class="comments"><a href="/blog/2012/06/30/use-mongoid-with-rails/#disqus_thread">Comments</a></span>
		
	</div>
	<h1 class="title" itemprop="name"><a href="/blog/2012/06/30/use-mongoid-with-rails/" itemprop="url">在rails中使用mongoid</a></h1>
	<div class="entry-content" itemprop="articleBody">
		<p>在我看来noSQL解决方案有一个最大的优点就是可以方便的scale out, Oracle等大型数据库也可以支持Grid，支持集群但是就是配置起来的繁琐而已，可以写一本厚厚的书啦。而今天要使用的mongodb只是简单的一个配置文件就能搞定，简单易用容易让人理解，只就是生产力的极大提升啊。</p>


		
		<a href="/blog/2012/06/30/use-mongoid-with-rails/" class="more-link">Read more</a>
	</div>

</article>

</div>
<nav id="pagenavi">
    
    
        <a href="/blog/page/2/" class="next">Next</a>
    
    <div class="center"><a href="/blog/archives">Blog Archives</a></div>
</nav></div>
			</div>
			<footer id="footer" class="inner"><p>
Copyright &copy; 2013 - <a href="http://wongyouth.com">http://wongyouth.com</a> - Wongyouth / 自由鱼 -
  <span class="credit">Powered by <a href="http://octopress.org">Octopress</a></span>
</p>

Design credit: <a href="http://shashankmehta.in/archive/2012/greyshade.html">Shashank Mehta</a></footer>
			<script src="/javascripts/slash.js"></script>
<script src="/javascripts/jquery.fancybox.pack.js"></script>
<script type="text/javascript">
(function($){
	$('.fancybox').fancybox();
})(jQuery);
</script> <!-- Delete or comment this line to disable Fancybox -->


<script type="text/javascript">
      var disqus_shortname = 'wongyouth';
      
        
        var disqus_script = 'count.js';
      
    (function () {
      var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true;
      dsq.src = 'http://' + disqus_shortname + '.disqus.com/' + disqus_script;
      (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
    }());
</script>



	<script type="text/javascript">
		var _gaq = _gaq || [];
		_gaq.push(['_setAccount', 'UA-30466888-1']);
		_gaq.push(['_trackPageview']);

		(function() {
			var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
			ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
			var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
		})();
	</script>




		</div>
	</div>
</body>
</html>
